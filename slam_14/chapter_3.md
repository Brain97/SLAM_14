# 3.1 旋转矩阵

## 3.1.1 点和向量、坐标系

一个**刚体**，既有**位置**，也有**姿态**。


向量，是线性空间中的一个元素。向量需要在**选定坐标系**之后（即确定了一个**线性空间的基$[\bf{e_1,e_2,e_3}]$**，才能确定他的**坐标**。
$$\Bbb{a}=[\bf{e_1,e_2,e_3}]\left[ \begin{array}{c} \Bbb{a_1} \\ \Bbb{a_2} \\\Bbb{a_3} \end{array}\right ]=\Bbb{a_1}\bf{e_1}+\Bbb{a_2}\bf{e_2}+\Bbb{a_3}\bf{e_3}
$$
坐标系通常是**正交**的。有**左手系和右手系**。

* **内积**,是一个数即**投影**。

<div align=center>

![avatar](内积.png)
</div>

* **外积**，方向**垂直**于这两个向量，大小为$\bf{|a| \cdot |b| }  sin\langle\bf{a,b }\rangle$,是两个向量张成的四边形的**有向面积**，用**a^**表示由$\bf{a}$生成的**反对称（Skew-Symmetry）矩阵**。这样，外积就表示成一个**线性运算**。外积只对三维向量有定义，此外，外积还能表示**旋转**。
<div align=center>

![avatar](外积.png)

</div>

    考虑2不平行向量，$\bf{a,b }$，其外积$\bf{w }$的**方向**由$\bf{a,b }$所在的**平面**决定，**大小**由两者的**夹角**决定。

<div align=center>

![avatar](外积表旋转.png)
</div>

### 3.1.2 坐标系间的欧氏变换
两个坐标系间进行**旋转+平移**，称为坐标系的**变换**。常见的作法是设定一个不动的世界坐标系$x_W,y_W,z_W$,然后机器人是一个坐标系$x_C,y_C,z_C$。对于一个向量$\bf{p}$,世界坐标系下观察到的的$\bf{p_w}$通过一个矩阵$\bf{T}$来变换到机器人的坐标系下的$\bf{p_c}$。
相机运动是一个**刚体运动**，保证了同一个向量在各个坐标系下**长度和夹角**都不会变化，是一个**欧氏变换**，由**旋转和平移**决定。

<div align=center>

![avatar](坐标变换.png)
</div>



设某个**单位正交基**$\bf{(e_1,e_2,e_3)}$经过一次旋转变成了$\bf{(e_1',e_2',e_3')}$,那么，对于同一个向量$\bf{a}$($该向量没有随着旋转而运动$)，他两个坐标系下的坐标为$\bf{[a_1,a_2,a_3]^T}$和$\bf{[a_1',a_2',a_3']^T}$。根据坐标定义，有

<div align=center>

![avatar](基变换.png)

</div>

对上述公式两边分别左乘$\left [ \begin{array}{c} \bf{e_1^T}\\\bf{e_1^T}\\\bf{e_1^T} \end{array} \right]$,则有

<div align=center>

![avatar](坐标变换公式.png)

</div>

矩阵$\bf{R}$有两组**基**的**內积**组成。$\bf{R}$描述**旋转**本身，被称为**旋转矩阵**。它有一些特别的性质，比如，是一个**行列式为1的正交矩阵（即逆为自身转置的矩阵,注意，向量正交指的是两个向量內积为0，夹角为90度）**，反之**行列式为1的正交矩阵就是一个旋转矩阵**。所以，旋转矩阵的定义如下：

<div align=center>

![avatar](旋转矩阵定义.png)

</div>

$SO(n)$指的是**特殊正交群**（Special Orthogonal Group）。其中，$R^{-1}=R^T$表示旋转$R$的逆,有

<div align=center>

![avatar](旋转矩阵的逆.png)

</div>

另外，若加上平移，则有

<div align=center>

![avatar](旋转加平移.png)
  
</div>